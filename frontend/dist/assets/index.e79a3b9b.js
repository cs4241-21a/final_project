var L=Object.defineProperty,T=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var x=(e,t,o)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,p=(e,t)=>{for(var o in t||(t={}))D.call(t,o)&&x(e,o,t[o]);if(y)for(var o of y(t))E.call(t,o)&&x(e,o,t[o]);return e},k=(e,t)=>T(e,N(t));import{o as l,c as d,a as s,w as B,v as O,m,F as f,r as v,t as a,b,d as U,e as _,f as S,g as P,h as $,i as F,j as V,V as j}from"./vendor.a93ceed0.js";const z=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}};z();var g=(e,t)=>{for(const[o,c]of t)e[o]=c;return e};const A={name:"Login",data:function(){return{username:"",buttonClicked:!1}},methods:{login(){this.buttonClicked=!0,this.$socket.emit("login",this.username)}}},M=s("h2",{class:"text-center"},"Login",-1),q={class:"input-group input-group-lg"},G=s("span",{class:"input-group-text",id:"inputGroup-sizing-lg"},"Name",-1),W=["disabled"];function H(e,t,o,c,n,r){return l(),d("div",null,[M,s("div",q,[G,B(s("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>e.username=i),type:"text",class:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg"},null,512),[[O,e.username]])]),s("button",{onClick:t[1]||(t[1]=(...i)=>r.login&&r.login(...i)),disabled:e.buttonClicked||e.username.trim().length<1,type:"button",class:"btn btn-primary mt-1 w-100"},"Login",8,W)])}var K=g(A,[["render",H]]);const Q={name:"Scores",computed:p({},m(["scores"]))},R=s("h2",{class:"text-center"},"Live Scores",-1),J={key:0,class:"list-group text-center"},X={class:"row"},Y={class:"col-6"},Z={class:"col-6"},ee={key:1},te=s("p",null,"No logged in users are live right now. Why not be the first?",-1),se=[te];function re(e,t,o,c,n,r){return l(),d("div",null,[R,e.scores.length>0?(l(),d("ul",J,[(l(!0),d(f,null,v(e.scores,i=>(l(),d("li",{key:i,class:"list-group-item align-items-center"},[s("div",X,[s("div",Y,a(i.username),1),s("div",Z,"$ "+a(i.score),1)])]))),128))])):(l(),d("div",ee,se))])}var oe=g(Q,[["render",re]]),ne="/assets/wpi-logo.e116f41b.png";const ce={name:"Clicker",computed:p({},m(["score","scorePerTick","scorePerClick"])),methods:p({},b(["incrementScore"]))},ie={class:"text-center"},le=s("br",null,null,-1),de=s("img",{src:ne},null,-1),ae=[de];function ue(e,t,o,c,n,r){return l(),d("div",ie,[s("h2",null,"$ "+a(e.score),1),s("h4",null,a(e.scorePerTick)+" $/sec",1),le,s("button",{onClick:t[0]||(t[0]=(...i)=>e.incrementScore&&e.incrementScore(...i)),type:"button",class:"btn btn-light btn-default rounded-circle"},ae),s("h4",null,"+ $ "+a(e.scorePerClick),1)])}var pe=g(ce,[["render",ue]]);function C(e,t){return(e*Math.pow(1.15,t)).toFixed()}const ge={name:"ProductionUpgrade",props:{index:{type:Number,required:!0}},computed:k(p({},m(["score","productionUpgradeStats","productionUpgradeLevels"])),{stats(){return this.productionUpgradeStats[this.index]||{}},level(){return this.productionUpgradeLevels[this.index]},upgradeCost(){return C(this.stats.baseCost,this.level)},upgradeInfo(){return{type:"production",index:this.index}},buttonText(){return`Hire ${this.stats.unit} ($${this.upgradeCost})`},canUpgrade(){return this.score>=this.upgradeCost}}),methods:p({},b(["applyUpgrade"]))},me={class:"list-group-item align-items-center"},_e={class:"row"},he={class:"col-6"},ke=s("br",null,null,-1),be={class:"badge bg-danger rounded-pill col-10"},$e=s("br",null,null,-1),fe={class:"badge bg-danger rounded-pill col-10"},ve=s("br",null,null,-1),Ce=["disabled"],we={class:"col-6"},ye=["src"];function xe(e,t,o,c,n,r){return l(),d("li",me,[s("div",_e,[s("div",he,[U(a(r.stats.name)+" ",1),ke,s("span",be,"Level "+a(r.level),1),$e,s("span",fe,"Power: $ "+a(r.stats.power)+"/sec",1),ve,s("button",{onClick:t[0]||(t[0]=i=>e.applyUpgrade(r.upgradeInfo)),disabled:!r.canUpgrade,class:"btn btn-danger col-12"},a(r.buttonText),9,Ce)]),s("div",we,[s("img",{src:r.stats.src,class:"img-fluid img-rounded"},null,8,ye)])])])}var Ue=g(ge,[["render",xe]]);const Se={name:"ClickUpgrade",props:{index:{type:Number,required:!0}},computed:k(p({},m(["score","clickUpgradeStats","clickUpgradeLevels"])),{stats(){return this.clickUpgradeStats[this.index]||{}},level(){return this.clickUpgradeLevels[this.index]},upgradeCost(){return C(this.stats.baseCost,this.level)},upgradeInfo(){return{type:"click",index:this.index}},buttonText(){return`Buy ($${this.upgradeCost})`},canUpgrade(){return this.score>=this.upgradeCost}}),methods:p({},b(["applyUpgrade"]))},Pe={class:"list-group-item align-items-center"},Ie={class:"row"},Le={class:"col-6"},Te=s("br",null,null,-1),Ne={class:"badge bg-danger rounded-pill col-10"},De=s("br",null,null,-1),Ee={class:"badge bg-danger rounded-pill col-10"},Be=s("br",null,null,-1),Oe=["disabled"],Fe={class:"col-6"},Ve=["src"];function je(e,t,o,c,n,r){return l(),d("li",Pe,[s("div",Ie,[s("div",Le,[U(a(r.stats.name)+" ",1),Te,s("span",Ne,"Level "+a(r.level),1),De,s("span",Ee,"Power: $ "+a(r.stats.power)+"/click",1),Be,s("button",{onClick:t[0]||(t[0]=i=>e.applyUpgrade(r.upgradeInfo)),disabled:!r.canUpgrade,class:"btn btn-danger col-12"},a(r.buttonText),9,Oe)]),s("div",Fe,[s("img",{src:r.stats.src,class:"img-fluid img-rounded"},null,8,Ve)])])])}var ze=g(Se,[["render",je]]);const Ae={name:"Upgrades",components:{ProductionUpgrade:Ue,ClickUpgrade:ze},computed:p({},m(["upgradeCount"])),data:function(){return{showProduction:!0}}},Me={class:"text-center"},qe=s("h2",{class:"text-center"},"Upgrades",-1),Ge={key:0},We=s("h4",null,"Production Upgrades",-1),He={key:0,class:"list-group"},Ke={key:1},Qe=s("h4",null,"Click Upgrades",-1),Re={key:0,class:"list-group"};function Je(e,t,o,c,n,r){const i=_("production-upgrade"),h=_("click-upgrade");return l(),d("div",null,[s("div",Me,[qe,s("button",{onClick:t[0]||(t[0]=u=>e.showProduction=!0),class:"btn btn-danger btn-sm col-5 m-1"},"Production Upgrades"),s("button",{onClick:t[1]||(t[1]=u=>e.showProduction=!1),class:"btn btn-danger btn-sm col-5 m-1"},"Click Upgrades")]),e.showProduction?(l(),d("div",Ge,[We,e.upgradeCount.production>0?(l(),d("ul",He,[(l(!0),d(f,null,v(e.upgradeCount.production,u=>(l(),P(i,{key:u,index:u-1},null,8,["index"]))),128))])):S("",!0)])):(l(),d("div",Ke,[Qe,e.upgradeCount.click>0?(l(),d("ul",Re,[(l(!0),d(f,null,v(e.upgradeCount.click,u=>(l(),P(h,{key:u,index:u-1},null,8,["index"]))),128))])):S("",!0)]))])}var Xe=g(Ae,[["render",Je]]);const Ye={name:"App",components:{Login:K,Scores:oe,Clicker:pe,Upgrades:Xe},computed:p({},m(["user"])),data:function(){return{tickIntervalID:null,updateIntervalID:null}},mounted:function(){this.$store.commit("initializeState"),this.tickIntervalID=setInterval(this.runProductionTick,1e3),this.updateIntervalID=setInterval(this.updateBackend,1e4)},beforeUnmount:function(){clearInterval(this.tickIntervalID),clearInterval(this.updateIntervalID)},sockets:{updateScores:function(e){console.log("scores update received!",e),this.$store.commit("updateScores",e)},login:function(e){console.log("login data received",e);let t={score:e.currScore,user:{production:e.prodUpgrades,click:e.clickUpgrades}};this.$store.commit("login",t)}},methods:k(p({},b(["runProductionTick"])),{updateBackend(){this.$socket.emit("update",this.user)}})},Ze={id:"wrapper",class:"container-fluid col-8"},et=s("div",{class:"row border border-3 border-danger rounded"},[s("h1",{class:"text-center"},"WPI Clicker")],-1),tt=s("br",null,null,-1),st={class:"row"},rt={class:"col-md-4"},ot=s("br",null,null,-1);function nt(e,t,o,c,n,r){const i=_("Login"),h=_("Scores"),u=_("Clicker"),I=_("Upgrades");return l(),d("div",Ze,[et,tt,s("div",st,[s("div",rt,[$(i),ot,$(h)]),$(u,{class:"col-md-4"}),$(I,{class:"col-md-4"})])])}var ct=g(Ye,[["render",nt]]);const it=[{index:0,name:"Fuller Labs",baseCost:10,unit:"CS Major",power:1,src:"/fuller-lab.png"},{index:1,name:"Campus Center",baseCost:1e3,unit:"Chartwells Employee",power:9,src:"/campus-center.png"},{index:2,name:"Innovation Studio",baseCost:1e4,unit:"Innovator",power:50,src:"/innovation-studio.png"},{index:3,name:"Smart World",baseCost:1e5,unit:"Researcher",power:280,src:"/smart-world.png"},{index:4,name:"Freshman Skyscraper",baseCost:1e6,unit:"Freshman",power:1800,src:"/freshman-skyscraper.png"}],lt=[{index:0,name:"Daka Cookies",baseCost:50,power:2,src:"/cookie.png"},{index:1,name:"Starbucks Coffee",baseCost:500,power:4,src:"/starbucks-cup.png"},{index:2,name:"Gompei Statue",baseCost:5e3,power:30,src:"/gompei-statue.png"},{index:3,name:"Early Decision Students",baseCost:1e5,power:550,src:"/wpi-logo.png"},{index:4,name:"Extended Breaks",baseCost:5e5,power:2e3,src:"/extended-break.png"},{index:5,name:"Summer Courses",baseCost:1e6,power:5e3,src:"/summer-courses.png"},{index:6,name:"Underloaded Terms",baseCost:1e7,power:45e3,src:"/underload.png"},{index:7,name:"Off Campus IQP",baseCost:1e9,power:6e6,src:"/iqp.png"}];var dt={production:it,click:lt},at=F({state:{score:0,scorePerTick:0,scorePerClick:0,stats:{production:[],click:[]},user:{production:{},click:{}},scores:[]},getters:{score(e){return e.score},user(e){let t=e.user;return t.score=e.score,t},scores(e){return e.scores.sort((t,o)=>o.score-t.score)},scorePerTick(e){return e.scorePerTick},scorePerClick(e){return e.scorePerClick},upgradeCount(e){return{production:e.stats.production.length,click:e.stats.click.length}},productionUpgradeStats(e){return e.stats.production},productionUpgradeLevels(e){return e.user.production},clickUpgradeStats(e){return e.stats.click},clickUpgradeLevels(e){return e.user.click}},mutations:{initializeState(e){e.stats=dt,e.stats.production.sort((t,o)=>t.index-o.index),e.stats.production.forEach(t=>{e.user.production[t.index]=0}),e.stats.click.sort((t,o)=>t.index-o.index),e.stats.click.forEach(t=>{e.user.click[t.index]=0})},login(e,t){e.score=t.score,e.user=t.user},updateScores(e,t){e.scores=t},runProductionTick(e){let t=0;Object.keys(e.user.production).forEach(o=>{let c=parseInt(o),n=e.user.production[c],r=e.stats.production[c].power;t+=n*r}),e.scorePerTick=t,e.score+=t},incrementScore(e){let t=1;Object.keys(e.user.click).forEach(o=>{let c=parseInt(o),n=e.user.click[c],r=e.stats.click[c].power;t+=n*r}),e.scorePerClick=t,e.score+=t},applyUpgrade(e,t){let{type:o,index:c}=t,n=e.stats[o][c],r=e.user[o],i=n.baseCost,h=r[c],u=C(i,h);u<=e.score&&(e.user[o][c]++,e.score-=u)}}});const w=V(ct);w.use(at);w.use(new j({debug:!0,connection:"https://web-ware-final.herokuapp.com"}));w.mount("#app");
