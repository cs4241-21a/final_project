<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>login</title>
    <!-- Import Styles -->
    <link rel="stylesheet" href="./assets/styles.css" />
    <link href=’https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons' rel=”stylesheet”>
    <link rel="icon" href="./assets/images/kannadrink.png" type="image/x-icon"/>
    <!-- Import Vue.js -->
    <script src="https://unpkg.com/vue@3.0.0-beta.12/dist/vue.global.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-uWxY/CJNBR+1zjPWmfnSnVxwRheevXITnMqoEIeG1LJrdI0GlVs/9cVSyPYXdcSF" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/light.css">

    <style>
        @media(prefer-color-scheme: light){
:root{
  --background-body: rgb(12 124 167 / 20%);
  --links: #0057d1;
  --focus: #0096bfcc;
  --button-base: #4f5687f2f2;
  --button-hover: #0071d1;
  --form-placeholder: #6e0404;
  --form-text: #1d1d1d;
  }

}
    </style>
</head>
  <body>
    <div class="boxHolder">
      <div class="box">
        <h1>Login</h1>
        <h2><a href="/auth/github">Login with GitHub</a></h2>
        <a href="sign_up.html">Sign up</a>
      </div>
    </div>
    
    <div class="boxHolder">
      <div class="box">
        <form id="newTrip">
          <h2>Login</h2>
    
          <label for="username">username </label>
          <input type="text" id="username" required />
    
          <label for="password">password: </label>
          <input type="password" id="password" required />
    
          <button id="submitLogin">Submit</button>
        </form>
      </div>
    </div>
    

    

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-kQtW33rZJAHjgefvhyyzcGF3C5TFyBQBA13V1RKPf4uH+bwyzQxZ6CmMZHmNBEfJ" crossorigin="anonymous"></script>
  <script>
const submit = function (e) {
    // prevent default form action from being carried out
    e.preventDefault();

    const username = document.querySelector("#username"),
        password = document.querySelector("#password");

    const json = {username: username.value, password: password.value};

    fetch("/login", {
      method: "POST",
      headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(json),
    }).then(response => response.json())
      .then(data => {
        if (data.code !== 200) {
          alert(data.msg);
        } else {
          window.location.href = '/';
        }
    });

    return false;
  };


  window.onload = function () {
    const button = document.querySelector("button");
    button.onclick = submit;
  };
  </script>
</body>
</html>
